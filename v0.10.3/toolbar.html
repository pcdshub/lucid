<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lucid Toolbar Configuration &mdash; lucid 0.10.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=b59eaf29"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Remote Access" href="troubleshooting/remote_access.html" />
    <link rel="prev" title="Lucid Grid Configuration" href="grid.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            lucid
          </a>
              <div class="version">
                0.10.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="launcher.html">Lucid Launcher Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="grid.html">Lucid Grid Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Lucid Toolbar Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#invocation">Invocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#options-and-limitations">Options and Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#guidelines">Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#file-format">File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Troubleshooting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting/remote_access.html">Remote Access</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">lucid</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Lucid Toolbar Configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/toolbar.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="lucid-toolbar-configuration">
<h1>Lucid Toolbar Configuration<a class="headerlink" href="#lucid-toolbar-configuration" title="Link to this heading"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">lucid</span></code> can be launched with a toolbar file that specifies
the tabs that are displayed below the device grid.
These tabs can be configured to hold buttons
that open other screens.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="_images/lucid_toolbar.png"><img alt="Lucid display with the toolbar highlighted." src="_images/lucid_toolbar.png" style="width: 522.5px; height: 412.5px;" /></a>
</figure>
<section id="invocation">
<h2>Invocation<a class="headerlink" href="#invocation" title="Link to this heading"></a></h2>
<p>The invocation to include this toolbar file is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lucid<span class="w"> </span>--toolbar<span class="w"> </span>/path/to/toolbar/file.yaml<span class="w"> </span>HUTCHNAME
</pre></div>
</div>
</section>
<section id="options-and-limitations">
<h2>Options and Limitations<a class="headerlink" href="#options-and-limitations" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The user can specify an arbitrary number of tabs.</p></li>
<li><p>Each tab can have an arbitrary number of columns.</p></li>
<li><p>The columns are filled from left to right, then from top to bottom.</p></li>
<li><p>Only <code class="docutils literal notranslate"><span class="pre">PyDMShellCommand</span></code> and <code class="docutils literal notranslate"><span class="pre">PyDMRelatedDisplayButton</span></code> widgets are supported.</p></li>
<li><p>Any available pyqt property or general python attribute can be specified on either
of these button types.</p></li>
</ul>
</section>
<section id="guidelines">
<h2>Guidelines<a class="headerlink" href="#guidelines" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>The related display option (<code class="docutils literal notranslate"><span class="pre">display</span></code>) should be used whenever it is possible to do so,
because the screen will open more quickly compared to a shell script, which will need to
initialize an entire new python shell with new imports.</p></li>
</ul>
</section>
<section id="file-format">
<h2>File Format<a class="headerlink" href="#file-format" title="Link to this heading"></a></h2>
<p>The toolbar configuration is stored in a yaml file that encodes a dictionary.
Each key in this top-level dictionary is the name of a tab to include.
These tabs will be arranged in file order from left to right.</p>
<p>Each of these tab names should contain another dictionary with the following top-level keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">config</span></code> (optional)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buttons</span></code></p></li>
</ul>
<p>The only <code class="docutils literal notranslate"><span class="pre">config</span></code> option right now is <code class="docutils literal notranslate"><span class="pre">cols</span></code>, which defaults to 4.</p>
<p>Here’s an example config file structure, omitting only the <code class="docutils literal notranslate"><span class="pre">buttons</span></code> sections:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">tab1_name_with_3_cols</span><span class="p">:</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cols</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">  </span><span class="nt">buttons</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">see below</span>
<span class="nt">tab2_name_with_2_cols</span><span class="p">:</span>
<span class="w">  </span><span class="nt">config</span><span class="p">:</span>
<span class="w">    </span><span class="nt">cols</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">buttons</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">see below</span>
<span class="nt">tab3_name_with_4_cols</span><span class="p">:</span>
<span class="w">  </span><span class="nt">buttons</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">see below</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">buttons</span></code> key should itself point to a dictionary that maps each
button text to a button config dictionary, in order.
LUCID will iterate through these dictionaries and create buttons,
arranging them from left to right across each column before moving to the next row.</p>
<p>The button config dictionary has one special key: <code class="docutils literal notranslate"><span class="pre">type</span></code>.
The <code class="docutils literal notranslate"><span class="pre">type</span></code> key can either be <code class="docutils literal notranslate"><span class="pre">shell</span></code> to create a <code class="docutils literal notranslate"><span class="pre">PyDMShellCommand</span></code> button,
or it can be <code class="docutils literal notranslate"><span class="pre">display</span></code> to create a <code class="docutils literal notranslate"><span class="pre">PyDMRelatedDisplayButton</span></code>.
If <code class="docutils literal notranslate"><span class="pre">type</span></code> is omitted, or is not one of these options,
an inactive <code class="docutils literal notranslate"><span class="pre">QPushButton</span></code> will be created.</p>
<p>All other keys in the config dictionary should be mappings from qt property names
to each property’s desired value.
This is forward-compatible with any new properties that may be implemented in the future
for these button types.</p>
<p>Here’s an example buttons config snippit that shows the structure and some of the
useful properties. This will create two buttons, one with button text “Cool PyDM Display”
and another with button text “Run Neat Script.”</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">buttons</span><span class="p">:</span>
<span class="w">  </span><span class="nt">Cool PyDM Display</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">display</span>
<span class="w">    </span><span class="nt">filenames</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/some/ui/file.ui</span>
<span class="w">    </span><span class="nt">macros</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;{&#39;PREFIX&#39;:</span><span class="nv"> </span><span class="s">&#39;COOL&#39;}&quot;</span>
<span class="w">  </span><span class="nt">Run Neat Script</span><span class="p">:</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">shell</span>
<span class="w">    </span><span class="nt">commands</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;echo</span><span class="nv"> </span><span class="s">&#39;neat&#39;&quot;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/path/to/some/neat/shell/script.sh</span>
<span class="w">    </span><span class="nt">redirectCommandOutput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<p>The LCLS lucid toolbar configurations are backed up in
<a class="reference external" href="https://github.com/pcdshub/lucid_config">this github repo</a>.
These are all good examples for how to set these files up.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="grid.html" class="btn btn-neutral float-left" title="Lucid Grid Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="troubleshooting/remote_access.html" class="btn btn-neutral float-right" title="Remote Access" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, SLAC National Accelerator Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>